@{
    ViewData["Title"] = "La La Land";
    Layout = "~/Views/Shared/_Layout.cshtml"; // Adjust if necessary
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" type="text/css" href="~/css/movie-scene.css" />
</head>
<body>
    <div class="page-container">
        <div class="movie-container">
            <div class="poster">
                <img src="~/images/4a33b287-6e93-4346-bfc0-3df34e4a9d6f_lalaland.jpg" alt="Movie Poster" />
            </div>
            <div class="details">
                <div class="rating">
                    <div class="stars">
                        @for (int i = 1; i <= 10; i++)
                        {
                            <span class="star" data-value="@i">&#9733;</span>
                        }
                    </div>
                </div>
                <h1>La La Land</h1>
                <p><strong>Director:</strong> Damien Chazelle</p>
                <p><strong>Actors:</strong> Ryan Gosling, Emma Stone</p>
                <p><strong>Tags:</strong> Musical, Drama, Romance</p>
                <div class="description">
                    <p>While navigating their careers in Los Angeles, a pianist and an actress fall in love while attempting to reconcile their aspirations for the future.</p>
                </div>
                <div class="trailer">
                    <h3>Trailer</h3>
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/0pdqf4P9MB8" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('mouseover', function () {
                let value = parseInt(this.getAttribute('data-value'));
                document.querySelectorAll('.star').forEach(s => {
                    let sValue = parseInt(s.getAttribute('data-value'));
                    if (sValue <= value) {
                        s.classList.add('hovered');
                    } else {
                        s.classList.remove('hovered');
                    }
                });
            });

            star.addEventListener('mouseout', function () {
                document.querySelectorAll('.star').forEach(s => {
                    s.classList.remove('hovered');
                });
            });

            star.addEventListener('click', function () {
                let value = parseInt(this.getAttribute('data-value'));
                document.querySelectorAll('.star').forEach(s => {
                    let sValue = parseInt(s.getAttribute('data-value'));
                    if (sValue <= value) {
                        s.classList.add('selected');
                    } else {
                        s.classList.remove('selected');
                    }
                });
                alert('You rated the movie ' + value + ' stars');
                // Add logic to save the rating
            });
        });

        // Ensure the correct stars are highlighted on page load
        function updateStars() {
            let selectedValue = parseInt(document.querySelector('.star.selected') ? document.querySelector('.star.selected').getAttribute('data-value') : 0);
            document.querySelectorAll('.star').forEach(s => {
                let sValue = parseInt(s.getAttribute('data-value'));
                if (sValue <= selectedValue) {
                    s.classList.add('selected');
                } else {
                    s.classList.remove('selected');
                }
            });
        }

        updateStars();
    </script>

</body>
</html>
